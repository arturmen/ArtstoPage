<!DOCTYPE html>
<html dir="ltr" lang="en-US">

<head>

	<meta http-equiv="content-type" content="text/html; charset=utf-8" />
	<meta name="author" content="SemiColonWeb" />

	<!-- Stylesheets
	============================================= -->
	<link href="http://fonts.googleapis.com/css?family=Source+Sans+Pro:300,400,600,700|Roboto:300,400,500,700" rel="stylesheet"
	 type="text/css" />
	<link rel="stylesheet" href="bootstrap.css" type="text/css" />
	<link rel="stylesheet" href="style.css" type="text/css" />

	<!-- One Page Module Specific Stylesheet -->
	<link rel="stylesheet" href="onepage.css" type="text/css" />
	<!-- / -->

	<link rel="stylesheet" href="dark.css" type="text/css" />
	<link rel="stylesheet" href="font-icons.css" type="text/css" />
	<link rel="stylesheet" href="css/et-line.css" type="text/css" />
	<link rel="stylesheet" href="animate.css" type="text/css" />
	<link rel="stylesheet" href="magnific-popup.css" type="text/css" />

	<link rel="stylesheet" href="css/fonts.css" type="text/css" />

	<!-- inserting a favicon using realfavicongenerator -->
	<link rel="apple-touch-icon" sizes="180x180" href="apple-touch-icon.png">
	<link rel="icon" type="image/png" sizes="32x32" href="favicon-32x32.png">
	<link rel="icon" type="image/png" sizes="16x16" href="favicon-16x16.png">
	<link rel="manifest" href="site.webmanifest">
	<link rel="mask-icon" href="safari-pinned-tab.svg" color="#5b93d5">
	<meta name="msapplication-TileColor" content="#b91d47">
	<meta name="theme-color" content="#ffffff">
	<!-- / -->

	<link rel="stylesheet" href="responsive.css" type="text/css" />
	<meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no" />


	<!-- zrobic by tu tytuł zależnie od zawartości -->
	<!-- Document Title
	============================================= -->
	<title>Artsto</title>

</head>

<body class="stretched side-push-panel">

	<div class="body-overlay"></div>

	<div id="side-panel" class="dark">

		<div id="side-panel-trigger-close" class="side-panel-trigger"><a href="#"><i class="icon-line-cross"></i></a></div>

		<div class="side-panel-wrap">

			<div class="widget widget_links clearfix">

				<h4>Kontakt</h4>

				<div style="font-size: 14px; line-height: 1.7;">


					<address style="line-height: 1.7;">
						Artsto Sp. z.o.o<br>
						ul. Dworska 147<br>
						38-430 Rogi<br>
					</address>

					<div class="clear topmargin-sm"></div>

					<abbr title="Phone Number">Telefon:</abbr> 605 038 635<br>
					<abbr title="Phone Number">Telefon:</abbr> 13 43 535 69<br>
					<abbr title="Email Address">Email:</abbr> robertmuron@op.pl<br>
					<abbr title="Email Address">Email:</abbr> biuro@artsto.pl
				</div>
			</div>
		</div>
	</div>

	<!-- Document Wrapper
	============================================= -->
	<div id="wrapper" class="clearfix">

		<!-- Header
		============================================= -->
		<header id="header" class="full-header transparent-header border-full-header dark static-sticky" data-sticky-class="not-dark"
		 data-sticky-offset="full" data-sticky-offset-negative="1000">

			<div id="header-wrap">

				<div class="container clearfix">

					<div id="primary-menu-trigger"><i class="icon-reorder"></i></div>

					<!-- Logo
					============================================= -->
					<div id="logo">
						<a href="index.html" class="standard-logo" data-dark-logo="assets/images/logo/logo-artsto-dark.png"><img src="assets/images/logo/logo-artsto-dark.png"
							 alt="Artsto Logo"></a>
						<a href="index.html" class="retina-logo" data-dark-logo="assets/images/logo/logo-artsto-dark.png"><img src="assets/images/logo/logo-artsto-dark.png"
							 alt="Artsto Logo"></a>
					</div><!-- #logo end -->

					<!-- Primary Navigation
					============================================= -->
					<nav id="primary-menu">
						<ul class="one-page-menu" data-easing="easeInOutExpo" data-speed="1250" data-offset="65">
							<li><a href="index.html">
									<div>Strona główna</div>
								</a></li>
							<li><a href="gallery.html">
									<div>Galeria</div>
								</a></li>
						</ul>

						<div id="side-panel-trigger" class="side-panel-trigger"><a href="#"><i class="icon-reorder"></i></a></div>

					</nav><!-- #primary-menu end -->

				</div>

			</div>

		</header><!-- #header end -->

		<!-- Page Title
		============================================= -->


		<section id="page-title">

			<div class="container clearfix">
				<h1>
					<!-- <script>
				
				var name = window.location.search.split('=')[1]
				document.write('Młynek do kawy - ' + name)
				
				</script>  -->

					<div>
						<div id="target-name"></div>
						<p>
							<script type="x-tmpl-mustache" id="template-product-name">
								{{name}}
							</script>
						</p>
					</div>



				</h1>

				<div id="portfolio-navigation">
					<!-- mozna by tu zrobić przesuwanie po produktach -->
					<a href="#"><i class="icon-angle-left"></i></a>
					<a href="#"><i class="icon-line-grid"></i></a>
					<a href="#"><i class="icon-angle-right"></i></a>
				</div>
			</div>

		</section><!-- #page-title end -->

		<!-- Content
		============================================= -->
		<section id="content">
			<div class="content-wrap">
				<div class="container clearfix">
					<div class="col_two_third">
						<!-- Product Single - Gallery
						   ============================================= -->
						<div class="product-image">
							<div class="fslider" data-pagi="false" data-arrows="false" data-thumbs="true">
								<div class="flexslider">
									<div class="slider-wrap" id="target-product-images-list" data-lightbox="gallery">
									</div>

									<script type="text/template" id="template-product-images">
										{{#images}}
											<div class="slide" data-thumb="{{source}}"><a href="{{source}}" title="Młynek Klepsydra"
												data-lightbox="gallery-item"><img src="{{source}}" alt="Młynek Klepsydra"></a></div>
										{{/images}}
									</script>
								</div>
							</div>

						</div><!-- Product Single - Gallery End -->
					</div>

					<!-- Portfolio Single Content
					============================================= -->
					<div class="col_one_third portfolio-single-content col_last nobottommargin">

						<!-- Portfolio Single - Description
						============================================= -->
						<div class="fancy-title title-bottom-border">
							<h2>O produkcie:</h2>
						</div>

						<div>
							<div id="target-description-short"></div>
							<p>
								<script type="x-tmpl-mustache" id="template-product-description-short">
								{{description-short}}
							</script>
							</p>
						</div>

						<div>
							<div id="target-description-long"></div>
							<p>
								<script type="x-tmpl-mustache" id="template-product-description-long">
								{{description-long}}
							</script>
							</p>
						</div>


						<!-- Portfolio Single - Description End -->

						<div class="line"></div>

						<!-- Portfolio Single - Meta
						============================================= -->
						<ul class="portfolio-meta bottommargin">
							<li><span>Kolory drewna:</span>

								<div>
									<br />
									<div id="target-wood-list">
									</div>

									<script type="text/template" id="template-wood-list">
											<table class="divcenter center">
												  <tr>
													{{#items}}
													  <td><img src="{{thumbnail}}" width="50" margin-left: 0px; alt="{{name}}"/><br/><font size="0.5">{{name}}</font></td>
													{{/items}}
												 </tr>
											  </table>	
											</script>
								</div>
							</li>
							<li><span>Kolory częsci metalowych:</span>
								<div>
									<div id="target-metal-list">
										<br />
									</div>

									<script type="text/template" id="template-metal-list">
											  <table class="divcenter center " >
											  <tr>
												{{#items}}
												  <td><img src="{{thumbnail}}" width="50" alt="{{name}}"/><br/><font size="0.5">{{name}}</font></td>
												{{/items}}
											 </tr>
										  </table>	
										</script>
								</div>
							</li>


							<li><span>Wzory ceramik:</span>
								<div>
									<div id="target-ceramics-list">
										<br />
									</div>

									<script type="text/template" id="template-ceramics-list">
										  <table class="divcenter center">
										  <tr>
										    {{#items}}
											  <td><img src="{{thumbnail}}" width="50" height="115" alt="{{name}}"/><br/><font size="0.5">{{name}}</font></td>
											{{/items}}
										 	</tr>
									  	  </table>	
										</script>
								</div>
							</li>
						</ul>
						<!-- Portfolio Single - Meta End -->


					</div><!-- .portfolio-single-content end -->

					<div class="clear"></div>

					<div class="divider divider-center"><i class="icon-circle"></i></div>

					<!-- Related Portfolio Items
					============================================= -->
					<h4>Inne produkty:</h4>

					<!-- TODO IMPLEMENT(wiktor)
					
						1. Use mustache
						2. Show all other products 
						3. use proper link names!!
					
					-->

					<div id="related-portfolio" class="owl-carousel portfolio-carousel carousel-widget" data-margin="20" data-nav="false"
					 data-autoplay="5000" data-items-xs="1" data-items-sm="2" data-items-md="3" data-items-xl="4">
						<div class="oc-item">
							<div class="iportfolio">
								<div class="portfolio-image">
									<a href="portfolio-single.html">
										<img src="assets/images/products/mlynek_tempo_porcellana_1.jpg" alt="">
									</a>
									<div class="portfolio-overlay">
										<a href="assets/images/products/mlynek_tempo_porcellana_1.jpg" class="left-icon" data-lightbox="image"><i
											 class="icon-line-stack-2"></i></a>
										<a href="product.html?name=klepsydra&color=green" class="right-icon"><i class="icon-line-ellipsis"></i></a>
									</div>
								</div>
								<div class="portfolio-desc">
									<h3><a href="product.html?name=klepsydra&color=green">Młynek Klepsydra</a></h3>
									<span><a href="product.html?name=klepsydra&color=green">Zielony</a>
								</div>
							</div>
						</div>
						<div class="oc-item">
							<div class="iportfolio">
								<div class="portfolio-image">
									<a href="portfolio-single.html">
										<img src="assets/images/products/mlynek_alto_porcellana_2.jpg" alt="Locked Steel Gate">
									</a>
									<div class="portfolio-overlay">
										<a href="assets/images/products/mlynek_alto_porcellana_2.jpg"" class=" left-icon" data-lightbox="image"><i
											 class="icon-line-stack-2"></i></a>
										<a href="product.html?name=kompletPS" class="right-icon"><i class="icon-line-ellipsis"></i></a>
									</div>
								</div>
								<div class="portfolio-desc">
									<h3><a href="product.html?name=kompletPS&color=brown">Młynki do pieprzu i soli</a></h3>
									<span><a href="product.html?name=kompletPS&color=brown">Brązowy</a></span>
								</div>
							</div>
						</div>
					</div><!-- .portfolio-carousel end -->
				</div>
			</div>

		</section><!-- #content end -->

		<!-- Footer
		============================================= -->
		<footer id="footer" class="dark noborder">

			<div class="container center">
				<div class="footer-widgets-wrap">

					<div class="row divcenter clearfix">

						<div class="col-lg-6">

							<div class="widget clearfix">
								<h4>Linki</h4>

								<ul class="list-unstyled footer-site-links nobottommargin">
									<li><a href="index.html" data-scrollto="index.html#wrapper" data-easing="easeInOutExpo" data-speed="1250"
										 data-offset="70">Strona główna</a></li>
									<li><a href="gallery.html" data-scrollto="gallery.html" data-easing="easeInOutExpo" data-speed="1250"
										 data-offset="70">Galeria</a></li>
								</ul>
							</div>

						</div>



						<div class="col-lg-6">

							<div class="widget clearfix">
								<h4>Kontakt</h4>

								<p class="lead">Artsto Sp. z.o.o<br>ul. Dworska 147<br>38-430 Rogi<br></p>


							</div>

						</div>

					</div>

				</div>
			</div>

			<div id="copyrights">
				<div class="container center clearfix">
					Copyright Artsto 2018 | All Rights Reserved
				</div>
			</div>

		</footer><!-- #footer end -->

	</div><!-- #wrapper end -->

	<!-- Go To Top
	============================================= -->
	<div id="gotoTop" class="icon-angle-up"></div>

	<!-- External JavaScripts
	============================================= -->
	<script src="js/jquery.js"></script>
	<script src="js/plugins.js"></script>

	<!-- Templating library -->
	<script src="https://cdn.rawgit.com/janl/mustache.js/master/mustache.min.js"></script>


	<!-- Google Map JavaScripts
	============================================= -->
	<script src="https://maps.google.com/maps/api/js?key=AIzaSyCQHDzHzLzAmzyx3YSP7otOIR8k0MVlImM" async defer></script>
	<script src="js/jquery.gmap.js"></script>

	<!-- Footer Scripts
	============================================= -->
	<script src="js/functions.js"></script>

	<script src="js/utils.js" type="text/javascript"></script>


	<script>
		
		function renderList(templateTag, targetTag, itemsList, itemsProductList) {
			// TODO(artur) make it cleaner (maybe use dictionary instead of list)
			var list = [];
			for (var i in itemsList) {
				for (var j in itemsProductList) {
					if (itemsList[i].name === itemsProductList[j]) {
						list.push(itemsList[i])
					}
				}
			}
			var template = $(templateTag).html();
			var target = $(targetTag);
			var result = Mustache.render(template, { "items": list });
			target.append(result);
		}

		function filterGalleryImages(images) {
			return images.filter(function (image) {
				return !(('gallery' in image) && (image.gallery === false));
			});
		}

		function renderProductPage(content) {
			var url = new URL(window.location.href);
			var productSelection = url.searchParams.get("name");

			var index = 0
			for (var idx in content.products) {
				if (productSelection === sanitazeName(content.products[idx].name)) {
					index = idx;
					break;
				}
			}

			var prod = content.products[index]

			var template = $('#template-product-description-long').html();
			Mustache.parse(template);
			var rendered = Mustache.render(template, { "description-long": prod.description_long });
			$('#target-description-long').html(rendered);

			var template = $('#template-product-description-short').html();
			Mustache.parse(template);
			var rendered = Mustache.render(template, { "description-short": prod.description_short });
			$('#target-description-short').html(rendered);

			var template = $('#template-product-name').html();
			Mustache.parse(template);
			var rendered = Mustache.render(template, { "name": prod.name });
			$('#target-name').html(rendered);

			var template = $('#template-product-images').html();
			Mustache.parse(template);
			var rendered = Mustache.render(template, { "images": filterGalleryImages(prod.images.all) });
			$('#target-product-images-list').html(rendered);

			// render specific lists on the page
			renderList('#template-wood-list', '#target-wood-list', dictToList(content.materials.wood), prod.materials.wood);
			renderList('#template-ceramics-list', '#target-ceramics-list', dictToList(content.materials.ceramics), prod.materials.ceramics);
			renderList('#template-metal-list', '#target-metal-list', dictToList(content.materials.metal), prod.materials.metal);
		}

		$.getJSON("artsto_data.json", function (data) {
			// Parses pseudo-database JSON file and calls the rendering of elements in the HTML file
			renderProductPage(data.content)
		});
	</script>



</body>

</html>